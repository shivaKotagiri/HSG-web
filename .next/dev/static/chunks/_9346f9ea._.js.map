{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/shivakumarkotagiri/developer/client-work/hsg-v2/HSG-web/components/admin-dashboard/AdminHeader.tsx"],"sourcesContent":["\"use client\";\n\nimport { LogOut, ShieldCheck } from \"lucide-react\";\nimport Image from \"next/image\";\nimport { signOut } from \"next-auth/react\";\n\ninterface AdminHeaderProps {\n  admin: {\n    email: string;\n    role: string;\n    avatar: string;\n  };\n}\n\nexport default function AdminHeader({ admin }: AdminHeaderProps) {\n  return (\n    <header className=\"bg-white sticky top-0 z-50 border-b border-gray-100 shadow-sm\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-20\">\n\n          {/* LEFT: Admin Identity */}\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex items-center justify-center w-10 h-10 rounded-xl bg-indigo-600 text-white shadow-lg shadow-indigo-200\">\n              <ShieldCheck className=\"w-6 h-6\" />\n            </div>\n            <div>\n              <h1 className=\"text-lg font-bold text-slate-900 tracking-tight\">\n                Admin Console\n              </h1>\n              <p className=\"text-xs font-medium text-slate-500 uppercase tracking-wide\">\n                {admin.role}\n              </p>\n            </div>\n          </div>\n\n          {/* RIGHT: Actions */}\n          <div className=\"flex items-center gap-4\">\n            <div className=\"hidden md:flex flex-col items-end mr-2\">\n              <span className=\"text-sm font-semibold text-slate-900\">\n                {admin.email}\n              </span>\n              <span className=\"text-xs text-emerald-600 flex items-center gap-1 font-medium\">\n                <span className=\"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse\" />\n                System Active\n              </span>\n            </div>\n\n            <div className=\"relative h-10 w-10 rounded-full ring-2 ring-white shadow-md\">\n              <Image\n                src={admin.avatar}\n                alt=\"Admin\"\n                fill\n                className=\"object-cover rounded-full\"\n              />\n            </div>\n\n            <div className=\"h-8 w-px bg-slate-200 mx-1\" />\n\n            {/* LOGOUT */}\n            <button\n              onClick={() => signOut({ callbackUrl: \"/login\" })}\n              aria-label=\"Logout\"\n              className=\"p-2.5 text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all duration-200\"\n            >\n              <LogOut className=\"w-5 h-5\" />\n            </button>\n          </div>\n\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AAJA;;;;;AAce,SAAS,YAAY,EAAE,KAAK,EAAoB;IAC7D,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCAGb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,sOAAW;oCAAC,WAAU;;;;;;;;;;;0CAEzB,6LAAC;;kDACC,6LAAC;wCAAG,WAAU;kDAAkD;;;;;;kDAGhE,6LAAC;wCAAE,WAAU;kDACV,MAAM,IAAI;;;;;;;;;;;;;;;;;;kCAMjB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDACb,MAAM,KAAK;;;;;;kDAEd,6LAAC;wCAAK,WAAU;;0DACd,6LAAC;gDAAK,WAAU;;;;;;4CAA0D;;;;;;;;;;;;;0CAK9E,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,2IAAK;oCACJ,KAAK,MAAM,MAAM;oCACjB,KAAI;oCACJ,IAAI;oCACJ,WAAU;;;;;;;;;;;0CAId,6LAAC;gCAAI,WAAU;;;;;;0CAGf,6LAAC;gCACC,SAAS,IAAM,IAAA,4JAAO,EAAC;wCAAE,aAAa;oCAAS;gCAC/C,cAAW;gCACX,WAAU;0CAEV,cAAA,6LAAC,uNAAM;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhC;KA1DwB"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///Users/shivakumarkotagiri/developer/client-work/hsg-v2/HSG-web/actions/save-attendance.ts"],"sourcesContent":["\"use server\";\n\nimport prisma from \"@/lib/prisma\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/authOptions\";\n\nexport async function saveAttendance(\n  date: string,\n  records: { studentId: string; status: \"PRESENT\" | \"ABSENT\" }[]\n) {\n  const session = await getServerSession(authOptions);\n\n  if (!session || session.user.role !== \"admin\") {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const normalizedDate = new Date(date);\n  normalizedDate.setHours(0, 0, 0, 0);\n\n  await prisma.$transaction(\n    records.map((r) =>\n      prisma.attendance.upsert({\n        where: {\n          studentId_date: {\n            studentId: r.studentId,\n            date: normalizedDate,\n          },\n        },\n        update: {\n          status: r.status,\n          adminId: session.user.id,\n        },\n        create: {\n          studentId: r.studentId,\n          status: r.status,\n          date: normalizedDate,\n          adminId: session.user.id,\n        },\n      })\n    )\n  );\n}\n"],"names":[],"mappings":";;;;;;;IAMsB,iBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///Users/shivakumarkotagiri/developer/client-work/hsg-v2/HSG-web/components/admin-dashboard/AttendanceManager.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\n\"use client\";\n\nimport {\n  Check,\n  X,\n  Search,\n  Save,\n  Calendar as CalendarIcon,\n  Loader2,\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { saveAttendance } from \"@/actions/save-attendance\";\n\ninterface Student {\n  id: string;\n  name: string;\n  roll: string;\n  status: \"PRESENT\" | \"ABSENT\";\n}\n\ninterface ManagerProps {\n  students: Student[];\n}\n\nexport default function AttendanceManager({\n  students: initialStudents,\n}: ManagerProps) {\n  const [students, setStudents] = useState<Student[]>(initialStudents);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedDate, setSelectedDate] = useState(\n    new Date().toISOString().split(\"T\")[0]\n  );\n  const [isSaving, setIsSaving] = useState(false);\n\n  /* ---------- helpers ---------- */\n\n  const toggleStatus = (id: string, status: \"PRESENT\" | \"ABSENT\") => {\n    setStudents((prev) =>\n      prev.map((s) => (s.id === id ? { ...s, status } : s))\n    );\n  };\n\n  const markAll = (status: \"PRESENT\" | \"ABSENT\") => {\n    setStudents((prev) => prev.map((s) => ({ ...s, status })));\n  };\n\n  /* ---------- save ---------- */\n\n  const handleSave = async () => {\n    setIsSaving(true);\n\n    try {\n      await saveAttendance(\n        selectedDate,\n        students.map((s) => ({\n          studentId: s.id,\n          status: s.status,\n        }))\n      );\n\n      alert(\"Attendance saved successfully\");\n    } catch (error) {\n      console.error(error);\n      alert(\"Failed to save attendance\");\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  /* ---------- filters ---------- */\n\n  const filteredStudents = students.filter(\n    (s) =>\n      s.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      s.roll.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  /* ---------- UI ---------- */\n\n  return (\n    <div className=\"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden\">\n      {/* Header */}\n      <div className=\"p-6 border-b border-gray-100\">\n        <div className=\"flex flex-col md:flex-row justify-between gap-4\">\n          <div>\n            <h3 className=\"text-lg font-bold text-slate-900\">\n              Mark Attendance\n            </h3>\n            <p className=\"text-sm text-slate-500\">\n              Manage daily student records\n            </p>\n          </div>\n\n          <div className=\"flex items-center gap-3\">\n            <div className=\"relative\">\n              <CalendarIcon className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\n              <input\n                type=\"date\"\n                value={selectedDate}\n                onChange={(e) => setSelectedDate(e.target.value)}\n                className=\"pl-10 pr-4 py-2 border rounded-xl text-sm\"\n              />\n            </div>\n\n            <button\n              onClick={handleSave}\n              disabled={isSaving}\n              className=\"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold disabled:opacity-60\"\n            >\n              {isSaving ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  Saving\n                </>\n              ) : (\n                <>\n                  <Save className=\"w-4 h-4\" />\n                  Save\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n\n        {/* Search + bulk */}\n        <div className=\"mt-6 flex flex-col sm:flex-row gap-4 justify-between\">\n          <div className=\"relative w-full sm:w-72\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search name / roll\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 rounded-xl bg-slate-50\"\n            />\n          </div>\n\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => markAll(\"PRESENT\")}\n              className=\"px-4 py-2 text-xs font-bold bg-emerald-50 text-emerald-700 rounded-lg\"\n            >\n              Mark All Present\n            </button>\n            <button\n              onClick={() => markAll(\"ABSENT\")}\n              className=\"px-4 py-2 text-xs font-bold bg-rose-50 text-rose-700 rounded-lg\"\n            >\n              Mark All Absent\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Table */}\n      <div className=\"overflow-x-auto\">\n        <table className=\"w-full text-sm\">\n          <thead className=\"bg-slate-50 border-b\">\n            <tr>\n              <th className=\"px-6 py-4 text-left\">Student</th>\n              <th className=\"px-6 py-4 text-center\">Status</th>\n            </tr>\n          </thead>\n          <tbody>\n            {filteredStudents.map((s) => (\n              <tr key={s.id} className=\"border-b hover:bg-slate-50\">\n                <td className=\"px-6 py-4\">\n                  <p className=\"font-bold\">{s.name}</p>\n                  <p className=\"text-xs text-slate-500\">{s.roll}</p>\n                </td>\n                <td className=\"px-6 py-4\">\n                  <div className=\"flex justify-center gap-2\">\n                    <button\n                      onClick={() => toggleStatus(s.id, \"PRESENT\")}\n                      className={`px-4 py-2 rounded-lg text-xs font-bold ${\n                        s.status === \"PRESENT\"\n                          ? \"bg-emerald-500 text-white\"\n                          : \"bg-gray-100 text-gray-400\"\n                      }`}\n                    >\n                      <Check className=\"inline w-4 h-4\" /> Present\n                    </button>\n                    <button\n                      onClick={() => toggleStatus(s.id, \"ABSENT\")}\n                      className={`px-4 py-2 rounded-lg text-xs font-bold ${\n                        s.status === \"ABSENT\"\n                          ? \"bg-rose-500 text-white\"\n                          : \"bg-gray-100 text-gray-400\"\n                      }`}\n                    >\n                      <X className=\"inline w-4 h-4\" /> Absent\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}